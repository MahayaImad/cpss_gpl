<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <!-- === VUE DE CONFIGURATION GPL === -->
        <record id="res_config_settings_view_form_gpl" model="ir.ui.view">
            <field name="name">res.config.settings.form.inherit.gpl</field>
            <field name="model">res.config.settings</field>
            <field name="priority">90</field>
            <field name="inherit_id" ref="base.res_config_settings_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//form" position="inside">
                    <app data-string="GPL CPSS" id="gpl" string="GPL CPSS" name="gpl" groups="cpss_gpl_base.group_gpl_manager">
                    <!-- === SECTION GPL CPSS === -->
                    <block title="Paramètres pour la gestion GPL - Cedar Peak Systems &amp; Solutions" name="cpss_gpl">

                        <!-- === INFORMATIONS ENTREPRISE === -->
                        <h2>Informations Entreprise</h2>

                        <setting>
                            <field name="gpl_company_name"/>
                            <div class="content-group">
                                <label for="gpl_company_name"/>
                                <field name="gpl_company_name" class="o_light_label"/>
                                <div class="text-muted">
                                    Nom affiché sur les certificats et rapports
                                </div>
                            </div>
                        </setting>

                        <setting>
                            <field name="gpl_company_license"/>
                            <div class="content-group">
                                <label for="gpl_company_license"/>
                                <field name="gpl_company_license" class="o_light_label"/>
                                <div class="text-muted">
                                    Numéro d'agrément officiel pour les installations GPL
                                </div>
                            </div>
                        </setting>

                        <!-- === PARAMÈTRES WORKFLOW === -->
                        <h2>Workflow et Processus</h2>

                        <setting>
                            <field name="gpl_use_advanced_workflow"/>
                            <div class="content-group">
                                <label for="gpl_use_advanced_workflow"/>
                                <div class="text-muted">
                                    Activer le workflow détaillé avec plus d'étapes de validation
                                </div>
                            </div>
                        </setting>

                        <setting>
                            <field name="gpl_require_appointment"/>
                            <div class="content-group">
                                <label for="gpl_require_appointment"/>
                                <div class="text-muted">
                                    Rendre les rendez-vous obligatoires pour les interventions
                                </div>
                            </div>
                        </setting>

                        <setting>
                            <field name="gpl_default_warranty_months"/>
                            <div class="content-group">
                                <label for="gpl_default_warranty_months"/>
                                <field name="gpl_default_warranty_months" class="o_light_label"/>
                                <div class="text-muted">
                                    Durée de garantie par défaut (en mois)
                                </div>
                            </div>
                        </setting>

                        <!-- === PARAMÈTRES RÉSERVOIRS === -->
                        <h2>Gestion des Réservoirs</h2>

                        <setting>
                            <field name="gpl_reservoir_test_frequency"/>
                            <div class="content-group">
                                <label for="gpl_reservoir_test_frequency"/>
                                <field name="gpl_reservoir_test_frequency" class="o_light_label"/>
                                <div class="text-muted">
                                    Fréquence des tests de réservoir (en années)
                                </div>
                            </div>
                        </setting>

                        <setting>
                            <field name="gpl_reservoir_max_age"/>
                            <div class="content-group">
                                <label for="gpl_reservoir_max_age"/>
                                <field name="gpl_reservoir_max_age" class="o_light_label"/>
                                <div class="text-muted">
                                    Âge maximum autorisé pour un réservoir (en années)
                                </div>
                            </div>
                        </setting>

                        <!-- === NOTIFICATIONS === -->
                        <h2>Notifications et Alertes</h2>

                        <setting>
                            <field name="gpl_notification_test_days"/>
                            <div class="content-group">
                                <label for="gpl_notification_test_days"/>
                                <field name="gpl_notification_test_days" class="o_light_label"/>
                                <div class="text-muted">
                                    Nombre de jours avant expiration pour envoyer l'alerte
                                </div>
                            </div>
                        </setting>

                        <setting>
                            <field name="gpl_notification_email"/>
                            <div class="content-group">
                                <label for="gpl_notification_email"/>
                                <field name="gpl_notification_email" class="o_light_label"/>
                                <div class="text-muted">
                                    Email pour recevoir les notifications système
                                </div>
                            </div>
                        </setting>

                        <!-- === RAPPORTS === -->
                        <h2>Rapports et Certificats</h2>

                        <setting>
                            <field name="gpl_certificate_template"/>
                            <div class="content-group">
                                <label for="gpl_certificate_template"/>
                                <field name="gpl_certificate_template" class="o_light_label"/>
                                <div class="text-muted">
                                    Template à utiliser pour les certificats
                                </div>
                            </div>
                        </setting>

                        <!-- === ASSISTANT DE CONFIGURATION === -->
                        <h2>Assistant de Configuration</h2>

                        <setting>
                            <div class="content-group">
                                <div class="alert alert-info">
                                    <h5><i class="fa fa-magic"/> Assistant de Configuration</h5>
                                    <p>Utilisez l'assistant pour configurer rapidement votre système GPL.</p>
                                    <button name="action_run_setup_wizard"
                                            string="Lancer l'Assistant"
                                            type="object"
                                            class="btn btn-primary"
                                            icon="fa-magic"/>
                                </div>
                            </div>
                        </setting>

                    </block>
                    </app>
                </xpath>
            </field>

    </record>

        <!-- Action principale pour la configuration -->
        <record id="action_gpl_configuration" model="ir.actions.act_window">
            <field name="name">Configuration GPL</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.config.settings</field>
            <field name="view_mode">form</field>
            <field name="target">inline</field>
            <field name="context">{'module' : 'cpss_gpl_base'}</field>
        </record>

    </data>
</odoo>
